import random
from time import time
import base64
uniCODESLIST=[
	(0, 127),(128, 255),(256, 383),(384, 591),(592, 687),(688, 767),(768, 879),(880, 1023),(1024, 1279),(1280, 1327),
	(1328, 1423),(1424, 1535),(1536, 1791),(1792, 1871),(1872, 1919),(1920, 1983),(1984, 2303),(2304, 2431),(2432, 2559),
	(2560, 2687),(2688, 2815),(2816, 2943),(2944, 3071),(3072, 3199),(3200, 3327),(3328, 3583),(3456, 3583),(0, 3711),
	(0, 3839),(3840, 4095),(4096, 4255),(4256, 4351),(4352, 4607),(4608, 4991),(4992, 5023),(5024, 5119),
	(5120, 5759),(5760, 5791),(5792, 5887),(5888, 5919),(5920, 5951),(5952, 5983),(5984, 6015),(6016, 6143),
	(6144, 6319),(6320, 6399),(6400, 6479),(6480, 6527),(6528, 6623),(25, 6655),(6656, 7423),(7424, 7551),
	(7552, 7679),(1, 7935),(7936, 8191),(8192, 8303),(8304, 8351),(8352, 8399),(8400, 8447),(8448, 8527),(8528, 8591),
	(8592, 8703),(8704, 8959),(8960, 9215),(9216, 9279),(9280, 9311),(9312, 9471),(9472, 9599),(9600, 9631),
	(9632, 9727),(9728, 9983),(9984, 10175),(10176, 10223),(10224, 10239),(10240, 10495),(10496, 10623),(10624, 10751),
	(10752, 11007),(11008, 11263),(11264, 11903),(126, 12031),(12032, 12255),(12272, 12287),(12288, 12351),(12352, 12447),
	(12448, 12543),(12544, 12591),(12592, 12687),(12688, 12703),(12704, 12735),(12736, 12783),(12784, 12799),(12800, 13055),
	(13056, 13311),(13312, 19903),(19904, 19967),(4, 40879),(40880, 40959),(40960, 42127),(42128, 42191),(42192, 44031),
	(44032, 55215),(55216, 55295),(63744, 64255),(64256, 64335),(64336, 65023),(65024, 65039),(65040, 65055),
	(65056, 65071),(65072, 65103),(65104, 65135),(65136, 65279),(65280, 65519),(65520, 65535),(65536, 65663),
	(65664, 65791),(65792, 65855),(65856, 66303),(66304, 66351),(66352, 66383),(66432, 66463),(66560, 66639),
	(66640, 66687),(66688, 66735),(66736, 67583),(67584, 67647),(67648, 118783),(118784, 119039),(119040, 119295),
	(119296, 119551),(119552, 119647),(119648, 119807),(119808, 120831),(120832, 131071),(131072, 173791),
	(173792, 194559),(194560, 195103),(917760, 917999)]
def getCode(len:int) -> str:
	allChar=''
	for n in uniCODESLIST:
		allChar+=''.join(tuple(chr(i) for i in range(n[0], n[1]) if chr(i).isprintable()))
	return ''.join(random.choice(allChar) for i in range(len))
def add(what:str) -> int:
	def adds(whatto: str)-> int:
		c=0
		for n in str(whatto):
			c+=int(n)
		return c
	while len(str(what))!=1:
		what=adds(what)
	return what
def GenToken(enc:str,tm:str,escape:int,eq:int)->int:
	new=''
	time=list(str(tm))
	count=1
	for n in enc:
		if count%escape==0:
			try:
				new+=f'{time.pop(0)}{n}'
			except:
				new+=f'0{n}'
		else:new+=f'{n}'
		count+=1
	new=str(escape)+'-'+new
	if time:
		new+='-'+''.join(time)
	new=new+f"-{eq}"
	return new
def GenTokenEnc(new:str)-> str:
	encAR=base64.b64encode(new).split(b'=')
	tm=int(time())
	enc=encAR[0]
	ene=len(encAR)-1
	what=add(tm)
	return enc,tm,what,ene
if __name__ == '__main__':
    new=getCode(20).encode()
    enc,tm,what,ene=GenTokenEnc(new)
    print(GenToken(enc.decode(),tm,what,ene))
